<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人体行为检测系统</title>
    <link rel="stylesheet" href="/frontend/nav.css">
    <link rel="stylesheet" href="/frontend/theme.css">
</head>

<body>
    <script defer src="/frontend/nav.js"></script>

    <div class="layout-container">
        <!-- 页面头部 -->
        <header class="layout-header">
        <h1>🤖 人体行为检测系统</h1>
        <p>基于深度学习的实时人体检测与分析平台</p>
        </header>

        <!-- 主要内容区 -->
        <main class="layout-content">
            <!-- 功能介绍 -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title text-center">🔍 综合检测功能</h2>
            </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center">
                        <div class="text-xl mb-2">👥</div>
                        <div class="text-sm text-gray-600">人体检测</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl mb-2">🧢</div>
                        <div class="text-sm text-gray-600">发网检测</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl mb-2">🧼</div>
                        <div class="text-sm text-gray-600">洗手检测</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl mb-2">🧴</div>
                        <div class="text-sm text-gray-600">消毒检测</div>
                    </div>
                </div>
                <p class="text-center text-gray-600 text-sm mt-4">
                    一次检测，全面分析 - 自动识别人体、发网佩戴、洗手和消毒行为
                </p>
            </div>

            <!-- 双栏布局：上传检测 & 实时检测 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- 图像/视频上传检测 -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">📷 图像/视频检测</h2>
            </div>

                    <!-- 文件类型选择 -->
                    <div class="flex justify-center gap-4 mb-6">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="fileType" value="image" checked class="text-primary">
                            <span>📷 图片检测</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="radio" name="fileType" value="video" class="text-primary">
                            <span>🎬 视频检测</span>
                </label>
            </div>

                    <!-- 上传区域 -->
                    <div id="uploadArea"
                        class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer transition-colors hover:border-primary hover:bg-gray-50">
                        <div class="text-4xl mb-4">📁</div>
                        <div id="uploadText" class="text-lg mb-2">点击或拖拽文件到此处</div>
                        <div id="uploadFormats" class="text-sm text-gray-600 mb-4">支持 JPG、PNG、GIF 格式</div>
                        <input type="file" id="fileInput" class="hidden" accept="image/*">
        </div>

                    <!-- 控制按钮 -->
                    <div class="flex gap-3 justify-center mt-6">
                        <button class="btn btn-secondary" id="uploadBtn">选择文件</button>
                        <button class="btn btn-primary" id="detectBtn" disabled>开始检测</button>
            </div>

                    <!-- 录制选项 -->
                    <div id="recordOptions" class="mt-4 p-4 bg-gray-50 rounded-lg" style="display: none;">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="recordProcess" class="text-primary">
                            <span class="text-sm">📹 录制检测过程（生成带标注的视频）</span>
                        </label>
            </div>

                    <!-- 状态和结果显示 -->
                    <div id="uploadStatus" class="mt-4"></div>
                    <div id="uploadResult" class="mt-4"></div>
                </div>

                <!-- 实时检测 -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">📹 实时检测</h2>
                    </div>

                    <!-- 视频容器 -->
                    <div class="relative bg-gray-900 rounded-lg overflow-hidden mb-4" style="aspect-ratio: 16/9;">
                        <video id="videoElement" class="w-full h-full object-cover" autoplay muted></video>
                        <canvas id="canvasOverlay" class="absolute inset-0 pointer-events-none"></canvas>
                    </div>

                    <!-- 控制按钮 -->
                    <div class="flex gap-3 justify-center mb-6">
                        <button class="btn btn-primary" id="startBtn">开启摄像头</button>
                        <button class="btn btn-secondary" id="stopBtn" disabled>停止检测</button>
                    </div>

                    <!-- 实时状态 -->
                    <div id="realtimeStatus" class="mb-4"></div>
                    <div id="realtimeResult" class="mb-4"></div>

                    <!-- 统计卡片 -->
                    <div class="grid grid-cols-2 gap-3">
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div id="totalDetections" class="text-xl font-bold text-primary">0</div>
                            <div class="text-xs text-gray-600">总检测次数</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div id="totalPersons" class="text-xl font-bold text-primary">0</div>
                            <div class="text-xs text-gray-600">检测总人数</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div id="totalWithHairnet" class="text-xl font-bold text-success">0</div>
                            <div class="text-xs text-gray-600">佩戴发网人数</div>
                        </div>
                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                            <div id="complianceRate" class="text-xl font-bold text-success">0.0%</div>
                            <div class="text-xs text-gray-600">发网合规率</div>
                        </div>
                    </div>
                </div>

                <!-- 系统管理 -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">⚙️ 系统管理</h2>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <a href="camera_config.html" class="btn btn-secondary text-center">
                            <div class="text-lg mb-1">📹</div>
                            <div class="text-sm">摄像头配置</div>
                        </a>
                        <a href="region_config.html" class="btn btn-secondary text-center">
                            <div class="text-lg mb-1">🎯</div>
                            <div class="text-sm">区域配置</div>
                        </a>
                        <a href="statistics.html" class="btn btn-secondary text-center">
                            <div class="text-lg mb-1">📊</div>
                            <div class="text-sm">统计分析</div>
                        </a>
                        <a href="system_info.html" class="btn btn-secondary text-center">
                            <div class="text-lg mb-1">🖥️</div>
                            <div class="text-sm">系统信息</div>
                        </a>
                </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/frontend/app.js"></script>
</body>

</html>