# 视频流配置简化说明

## ✅ 已完成的简化

### 1. 配置参数简化

**之前**:
- `log_interval`: 检测间隔（帧数）
- `stream_interval`: 视频流推送间隔（帧数）
- `frame_by_frame`: 是否逐帧模式

**现在**:
- `log_interval`: 检测频率（帧数）
  - 同时控制检测和视频流推送的频率
  - 视频流将显示检测后的结果（带标注的帧）

### 2. 逻辑调整

**之前**:
- 检测频率和视频流推送频率独立
- 可能显示未检测的原始帧

**现在**:
- 视频流推送频率与检测频率保持一致
- 只在检测时推送视频流
- 确保视频流显示的是检测后的结果（带标注的帧）

### 3. 前端界面简化

**之前**:
- 检测帧率滑块（1-30帧）
- 检测间隔输入框（1-1000帧）
- 逐帧模式开关

**现在**:
- 检测频率输入框（1-1000帧）
- 说明文字：视频流将同步显示检测结果

## 📋 配置说明

### 检测频率 (log_interval)

- **作用**: 控制检测的频率，同时控制视频流推送的频率
- **说明**: 每N帧检测一次，视频流将同步显示检测结果
- **示例**: `log_interval=120` 表示每120帧检测一次，视频流也每120帧推送一次
- **影响**: 
  - 数值越小，检测和视频流更新越频繁，CPU占用越高
  - 数值越大，检测和视频流更新越不频繁，CPU占用越低

## 🎯 使用方式

1. 在相机配置页面设置检测频率
2. 视频流将自动使用相同的频率显示检测结果
3. 视频流显示的是检测后的结果（带标注的帧）

## 🔄 配置流程

```
用户在相机配置页面设置检测频率
    ↓
保存配置
    ↓
配置保存到YAML文件
    ↓
同步配置到Redis（stream_interval自动与log_interval保持一致）
    ↓
检测进程每100帧检查一次配置
    ↓
从Redis读取配置
    ↓
应用新配置：
  - 每N帧检测一次
  - 每N帧推送一次视频流（显示检测后的结果）
```

## ✅ 优势

1. **配置简化**: 只需要配置一个参数（检测频率）
2. **逻辑清晰**: 视频流推送频率与检测频率保持一致
3. **结果一致**: 视频流显示的是检测后的结果（带标注的帧）
4. **易于理解**: 用户只需要理解一个概念（检测频率）

