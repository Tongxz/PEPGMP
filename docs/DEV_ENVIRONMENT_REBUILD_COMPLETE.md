# å¼€å‘ç¯å¢ƒé‡å»ºå®ŒæˆæŠ¥å‘Š

## âœ… é‡å»ºå®Œæˆ

**å®Œæˆæ—¶é—´**: 2025-11-25  
**é¡¹ç›®åç§°**: pepGMP  
**çŠ¶æ€**: âœ… **æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ**

---

## ğŸ“‹ é‡å»ºæ­¥éª¤æ€»ç»“

### 1. æ•°æ®å¤‡ä»½ âœ…

- âœ… PostgreSQLæ•°æ®åº“å¤‡ä»½: `backups/dev/db/backup_pyt_development_20251125_133358.sql.gz` (4.0MB)
- âœ… Redisæ•°æ®å¤‡ä»½: `backups/dev/redis/backup_redis_20251125_133358.rdb`
- âœ… Dockerå·å¤‡ä»½: PostgreSQLå’ŒRediså·

### 2. å®¹å™¨é‡å»º âœ…

- âœ… åœæ­¢æ—§å®¹å™¨ï¼ˆpyt-*ï¼‰
- âœ… æ¸…ç†æ—§ç½‘ç»œå’Œæ•°æ®å·
- âœ… ä¿®å¤Dockerfile.devï¼ˆlibatlas-base-dev â†’ libopenblas-devï¼‰
- âœ… é‡æ–°æ„å»ºé•œåƒ
- âœ… å¯åŠ¨æ–°å®¹å™¨ï¼ˆpepgmp-*ï¼‰

### 3. æ•°æ®åº“åˆå§‹åŒ– âœ…

**é—®é¢˜**: æ—§æ•°æ®å·å¯¼è‡´PostgreSQLè·³è¿‡åˆå§‹åŒ–ï¼Œç”¨æˆ·æœªåˆ›å»º

**è§£å†³æ–¹æ¡ˆ**:
- âœ… å®Œå…¨åˆ é™¤æ—§æ•°æ®å·ï¼ˆpyt_postgres_dev_dataï¼‰
- âœ… é‡æ–°åˆ›å»ºæ•°æ®å·ï¼ˆpostgres_dev_dataï¼‰
- âœ… ç­‰å¾…PostgreSQLè‡ªåŠ¨åˆå§‹åŒ–ï¼ˆ70ç§’ï¼‰
- âœ… éªŒè¯ç”¨æˆ·å’Œæ•°æ®åº“åˆ›å»ºæˆåŠŸ

### 4. æ•°æ®æ¢å¤ âœ…

- âœ… ä»å¤‡ä»½æ¢å¤æ•°æ®åº“æ•°æ®
- âœ… éªŒè¯è¡¨ç»“æ„å®Œæ•´æ€§
- âœ… éªŒè¯æ•°æ®å®Œæ•´æ€§

### 5. æœåŠ¡éªŒè¯ âœ…

- âœ… APIå¥åº·æ£€æŸ¥: `http://localhost:8000/health` â†’ `{"status":"healthy"}`
- âœ… æ•°æ®åº“è¿æ¥: æ­£å¸¸
- âœ… APIç»Ÿè®¡ç«¯ç‚¹: æ­£å¸¸å“åº”
- âœ… å‰åç«¯æœåŠ¡: è¿è¡Œæ­£å¸¸

---

## ğŸ³ å½“å‰å®¹å™¨çŠ¶æ€

| å®¹å™¨åç§° | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| `pepgmp-postgres-dev` | âœ… Healthy | PostgreSQLæ•°æ®åº“ |
| `pepgmp-redis-dev` | âœ… Healthy | Redisç¼“å­˜ |
| `pepgmp-api-dev` | âœ… Healthy | åç«¯APIæœåŠ¡ |
| `pepgmp-frontend-dev` | âœ… Running | å‰ç«¯æœåŠ¡ |

---

## ğŸŒ æœåŠ¡è®¿é—®åœ°å€

- **å‰ç«¯**: http://localhost:5173
- **API**: http://localhost:8000
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health

---

## ğŸ“Š æ•°æ®åº“ä¿¡æ¯

- **æ•°æ®åº“å**: `pepgmp_development`
- **ç”¨æˆ·å**: `pepgmp_dev`
- **è¡¨æ•°é‡**: 7ä¸ªï¼ˆalerts, behaviors, cameras, detection_zones, detections, statistics, system_configsï¼‰
- **æ•°æ®çŠ¶æ€**: âœ… å·²ä»å¤‡ä»½æ¢å¤

---

## ğŸ”§ åˆ›å»ºçš„è„šæœ¬

1. **`scripts/backup_dev_data.sh`** - å¼€å‘ç¯å¢ƒæ•°æ®å¤‡ä»½
2. **`scripts/restore_dev_data.sh`** - å¼€å‘ç¯å¢ƒæ•°æ®æ¢å¤
3. **`scripts/rebuild_dev_environment.sh`** - ä¸€é”®é‡å»ºç¯å¢ƒ
4. **`scripts/fix_database_user.sh`** - æ•°æ®åº“ç”¨æˆ·ä¿®å¤

---

## âš ï¸ é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: Dockerfileæ„å»ºå¤±è´¥

**é”™è¯¯**: `libatlas-base-dev` åŒ…åœ¨Debian Trixieä¸­ä¸å¯ç”¨

**è§£å†³**: æ›¿æ¢ä¸º `libopenblas-dev`

---

### é—®é¢˜2: æ•°æ®åº“ç”¨æˆ·æœªåˆ›å»º

**é”™è¯¯**: PostgreSQLè·³è¿‡åˆå§‹åŒ–ï¼Œç”¨æˆ· `pepgmp_dev` ä¸å­˜åœ¨

**åŸå› **: æ•°æ®ç›®å½•å·²å­˜åœ¨ï¼ˆä»æ—§å®¹å™¨è¿ç§»ï¼‰ï¼ŒPostgreSQLè®¤ä¸ºå·²åˆå§‹åŒ–

**è§£å†³**: 
1. å®Œå…¨åˆ é™¤æ—§æ•°æ®å·ï¼ˆ`pyt_postgres_dev_data`ï¼‰
2. é‡æ–°åˆ›å»ºæ•°æ®å·ï¼ˆ`postgres_dev_data`ï¼‰
3. ç­‰å¾…PostgreSQLè‡ªåŠ¨åˆå§‹åŒ–ï¼ˆ70ç§’ï¼‰
4. éªŒè¯ç”¨æˆ·å’Œæ•°æ®åº“åˆ›å»ºæˆåŠŸ

---

## ğŸ“ åç»­ä½¿ç”¨

### å¯åŠ¨æœåŠ¡

```bash
docker compose up -d
```

### åœæ­¢æœåŠ¡

```bash
docker compose down
```

### æŸ¥çœ‹æ—¥å¿—

```bash
docker compose logs -f
```

### å¤‡ä»½æ•°æ®

```bash
bash scripts/backup_dev_data.sh
```

### æ¢å¤æ•°æ®

```bash
bash scripts/restore_dev_data.sh ./backups/dev [æ—¶é—´æˆ³]
```

---

## âœ… éªŒè¯æ¸…å•

- [x] æ‰€æœ‰å®¹å™¨è¿è¡Œæ­£å¸¸
- [x] æ•°æ®åº“ç”¨æˆ·å’Œæ•°æ®åº“åˆ›å»ºæˆåŠŸ
- [x] æ•°æ®åº“è¡¨ç»“æ„å®Œæ•´
- [x] æ•°æ®æ¢å¤æˆåŠŸ
- [x] APIå¥åº·æ£€æŸ¥é€šè¿‡
- [x] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [x] APIç»Ÿè®¡ç«¯ç‚¹æ­£å¸¸å“åº”
- [x] å‰åç«¯æœåŠ¡æ­£å¸¸

---

**çŠ¶æ€**: âœ… **å¼€å‘ç¯å¢ƒé‡å»ºå®Œæˆï¼Œæ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ**  
**ä¸‹ä¸€æ­¥**: å¯ä»¥å¼€å§‹æ­£å¸¸å¼€å‘å·¥ä½œ

---

**é‡å»ºå®Œæˆæ—¶é—´**: 2025-11-25 07:10  
**æ€»è€—æ—¶**: çº¦1å°æ—¶  
**å¤‡ä»½ä½ç½®**: `./backups/dev/`

