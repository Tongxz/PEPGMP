# 剩余任务清单

## 📋 任务状态概览

### ✅ 已完成任务

#### P0任务（核心功能完善）- 98% 完成
- ✅ 统计分析页面：实时统计、事件历史列表
- ✅ 检测记录页面：分页、时间范围筛选、详情查看、状态更新
- ✅ 告警中心页面：规则删除、详情查看、规则详情查看

#### P1任务（用户体验提升）- 33% 完成
- ✅ 实时监控大屏：多摄像头实时画面展示、WebSocket实时数据更新
- ❌ 搜索功能：已移除（系统规模小，不需要）

---

## 🚀 待完成任务

### P1任务（高优先级）

#### 1. 数据导出功能 ⏳ 待实现

**功能描述**:
- 检测记录导出（CSV/Excel格式）
- 统计数据导出（CSV/Excel格式）
- 违规记录导出（CSV/Excel格式）

**需要实现的内容**:

**后端**:
- [ ] 检查现有导出API接口（`/api/v1/download/*`）
- [ ] 实现检测记录导出接口
- [ ] 实现统计数据导出接口
- [ ] 实现违规记录导出接口
- [ ] 支持CSV和Excel格式
- [ ] 支持时间范围筛选
- [ ] 支持摄像头筛选

**前端**:
- [ ] 在"历史记录"页面添加导出按钮
- [ ] 在"统计分析"页面添加导出按钮
- [ ] 在"告警中心"页面添加导出按钮（告警历史）
- [ ] 实现导出格式选择（CSV/Excel）
- [ ] 实现导出进度提示
- [ ] 实现导出文件下载

**涉及文件**:
- `src/api/routers/download.py` - 后端导出API
- `frontend/src/views/DetectionRecords.vue` - 检测记录页面
- `frontend/src/views/Statistics.vue` - 统计分析页面
- `frontend/src/views/Alerts.vue` - 告警中心页面
- `frontend/src/api/download.ts` - 前端导出API客户端（可能需要创建）

**优先级**: 🔴 **高**

---

#### 2. 批量操作功能 ⏳ 待实现

**功能描述**:
- 摄像头批量启用/禁用
- 摄像头批量启动/停止
- 违规记录批量状态更新

**需要实现的内容**:

**后端**:
- [ ] 检查现有批量操作API接口
- [ ] 实现摄像头批量启用/禁用接口
- [ ] 实现摄像头批量启动/停止接口
- [ ] 实现违规记录批量状态更新接口
- [ ] 添加批量操作结果返回（成功/失败列表）

**前端**:
- [ ] 在"相机配置"页面添加批量操作功能
  - [ ] 添加复选框列
  - [ ] 添加批量操作工具栏
  - [ ] 实现批量启用/禁用
  - [ ] 实现批量启动/停止
- [ ] 在"历史记录"页面的违规记录表格添加批量操作
  - [ ] 添加复选框列
  - [ ] 添加批量状态更新按钮
  - [ ] 实现批量状态更新
- [ ] 添加批量操作确认对话框
- [ ] 添加批量操作结果提示

**涉及文件**:
- `src/api/routers/cameras.py` - 摄像头API（可能需要添加批量操作接口）
- `src/api/routers/records.py` - 记录API（可能需要添加批量操作接口）
- `frontend/src/views/CameraConfig.vue` - 摄像头配置页面
- `frontend/src/views/DetectionRecords.vue` - 检测记录页面
- `frontend/src/api/camera.ts` - 摄像头API客户端

**优先级**: 🟡 **中**

---

### P2任务（中优先级，可选）

#### 3. 告警处理状态更新 ⏳ 可选

**功能描述**:
- 在告警中心页面添加告警处理状态更新功能

**说明**:
- 违规记录已有状态更新功能
- 告警处理状态更新可能不是必需的
- 如果用户需要，可以后续添加

**优先级**: 🟢 **低**

---

#### 4. 摄像头日志实时查看 ⏳ 可选

**功能描述**:
- 在摄像头配置页面添加日志查看功能
- 支持实时刷新和过滤

**说明**:
- 后端已有 `/cameras/{id}/logs` 接口
- 前端未实现UI

**优先级**: 🟢 **低**

---

#### 5. 区域导入导出 ⏳ 可选

**功能描述**:
- 区域配置导入/导出功能
- 支持JSON格式

**说明**:
- 后端已有导入导出接口（`/management/regions/import`, `/management/regions/export`）
- 前端未实现UI

**优先级**: 🟢 **低**

---

## 📊 任务优先级总结

### 🔴 高优先级（建议立即实现）

1. **数据导出功能** - 实用性强，用户可能需要导出数据进行分析

### 🟡 中优先级（短期实现）

2. **批量操作功能** - 提升用户体验，减少重复操作

### 🟢 低优先级（可选实现）

3. 告警处理状态更新
4. 摄像头日志实时查看
5. 区域导入导出

---

## 🎯 建议实施顺序

1. **第一步**: 实现数据导出功能（高优先级）
2. **第二步**: 实现批量操作功能（中优先级）
3. **第三步**: 根据用户需求决定是否实现其他可选功能

---

## 📝 注意事项

1. **架构合规**: 所有新功能必须符合DDD架构要求
2. **错误处理**: 统一的错误处理和用户提示
3. **性能考虑**: 批量操作和导出功能需要考虑性能影响
4. **用户体验**: 提供清晰的进度提示和反馈

---

**文档版本**: 1.0
**最后更新**: 2024-11-05
**搜索功能状态**: ❌ 已移除
