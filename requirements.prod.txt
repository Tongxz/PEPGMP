# PyTorch CUDA 版本在 Dockerfile.prod 中安装（默认 cu124），避免在此重复安装 CPU 版
opencv-python>=4.8.0
ultralytics>=8.0.0
# 生产必须使用 MediaPipe：为避免“安装了但缺少 solutions 属性”的异常，建议固定到稳定版本
# 如需升级请同步在生产机验证：import mediapipe as mp; mp.solutions 是否存在
mediapipe==0.10.14
# 生产必须使用 Docker 部署服务（aiodocker）
aiodocker>=0.24.0
# mediapipe 依赖链对 protobuf 版本较敏感，固定上限避免运行时奇怪的 attribute 错误
protobuf<5
pillow>=9.5.0
numpy>=1.24.0,<2.0
pandas>=2.0.0
scikit-learn>=1.3.0
scipy>=1.10.0
xgboost>=1.7.0
fastapi>=0.100.0
uvicorn[standard]>=0.23.0
jinja2>=3.1.0
python-multipart>=0.0.6
websockets>=11.0.0
sqlalchemy>=2.0.0
alembic>=1.11.0
psycopg2-binary>=2.9.0
asyncpg>=0.29.0
# redis>=4.5.0  # 4.5.0+ 需要 Python 3.11+，Python 3.10 使用 4.0.x
redis[hiredis]>=4.0.0,<4.5.0
celery>=5.3.0
pydantic>=2.0.0
python-jose[cryptography]>=3.3.0
PyJWT>=2.8.0
cryptography>=41.0.0
passlib[bcrypt]>=1.7.4
python-dotenv>=1.0.0
loguru>=0.7.0
click>=8.1.0
rich>=13.0.0
psutil>=5.9.0
pyyaml>=6.0
requests>=2.31.0
tqdm>=4.65.0
gunicorn>=21.2.0
sentry-sdk[fastapi]>=1.29.0
prometheus-client>=0.17.0
structlog>=23.1.0
orjson>=3.9.0
ujson>=5.8.0
# redis[hiredis] 已在上面定义，这里删除重复项
healthcheck>=1.3.3

# ==================== 可选：TensorRT 优化（性能提升 2-5 倍）====================
# TensorRT 是 NVIDIA 的深度学习推理优化库，可以显著提升模型推理性能
# 注意：
#   - NVIDIA Blackwell 架构（RTX 5070）需要使用 TensorRT 10.8（最新版本）
#   - 需要与 CUDA 12.8 兼容
#   - 如果安装失败，代码会自动回退到 PyTorch 模型（不影响功能）
#   - 安装会增加镜像大小（约几百 MB）
#   - 首次转换模型可能需要几分钟时间
#   - TensorRT 转换需要 ONNX 作为中间格式，因此需要安装 ONNX 相关依赖
# 如果不需要 TensorRT 优化，可以注释掉 tensorrt>=10.8.0 这一行
tensorrt>=10.8.0
# ONNX 相关依赖（TensorRT 转换必需）
onnx>=1.12.0,<2.0.0
onnxslim>=0.1.71
onnxruntime-gpu>=1.12.0
